{"ast":null,"code":"var _jsxFileName = \"/Users/xujinting/Desktop/web_final_main/web_final_progect/final/frontend/src/Containers/ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Input, Modal, Form, Tabs } from 'antd';\nimport Title from '../Components/Title';\nimport Message from '../Components/Message';\nimport { ChatBoxMessages } from '../Components/ChatBoxMessages';\nimport { useQuery } from '@apollo/client';\nimport { FRIENDS_QUERY } from '../graphql/queries';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst chatboxnamedecompose = chatBoxName => {\n  let tmp = chatBoxName.split('_');\n  return tmp;\n};\n\nconst ChatRoom = props => {\n  _s();\n\n  const {\n    chatwparticular,\n    setChatlistdata,\n    setChatwparticular,\n    sendMessage,\n    username,\n    body,\n    setBody,\n    displayStatus,\n    chatBoxName,\n    setChatBoxName\n  } = props;\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(FRIENDS_QUERY, {\n    variables: {\n      username\n    }\n  });\n\n  const onFinish = values => {\n    console.log('Success:', values);\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  let two = chatboxnamedecompose(chatBoxName);\n  const anotherUser = two[0] === username ? two[1] : two[0];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    c: true,\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: anotherUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        danger: true,\n        onClick: () => {\n          setChatwparticular(false);\n          setChatBoxName('');\n        },\n        children: \"back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ChatBoxMessages, {\n      username: username,\n      chatBoxName: chatBoxName,\n      chatwparticular: chatwparticular\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Input.Search, {\n      enterButton: \"Send\",\n      placeholder: \"Type a message here...\",\n      value: body,\n      onChange: e => setBody(e.target.value),\n      onSearch: async msg => {\n        if (!msg) {\n          displayStatus({\n            status: 'Failed',\n            message: 'Please enter a message body.'\n          });\n          return;\n        }\n\n        let twonames = chatboxnamedecompose(chatBoxName);\n        const receiver = twonames[0] === username ? twonames[1] : twonames[0];\n        await sendMessage({\n          variables: {\n            from: username,\n            to: receiver,\n            message: msg\n          }\n        }); //         setBody('');\n        //         refetch()\n        //         if (data) {\n        //         let tmp = data.friends.map(i => {return {...i}})\n        //         tmp.forEach((i)=>{i.unreadDot = false});    \n        //         setChatlistdata(tmp)\n        //         //console.log('in chatroom useeffect',data.friends)\n        // }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChatRoom, \"Ax1NTnCrIM4NwBWa50rg4himazY=\", false, function () {\n  return [useQuery];\n});\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["/Users/xujinting/Desktop/web_final_main/web_final_progect/final/frontend/src/Containers/ChatRoom.js"],"names":["Button","Input","Modal","Form","Tabs","Title","Message","ChatBoxMessages","useQuery","FRIENDS_QUERY","chatboxnamedecompose","chatBoxName","tmp","split","ChatRoom","props","chatwparticular","setChatlistdata","setChatwparticular","sendMessage","username","body","setBody","displayStatus","setChatBoxName","loading","error","data","refetch","variables","onFinish","values","console","log","onFinishFailed","errorInfo","two","anotherUser","e","target","value","msg","status","message","twonames","receiver","from","to"],"mappings":"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","sourcesContent":["import { Button, Input, Modal, Form, Tabs} from 'antd';\nimport Title from '../Components/Title';\nimport Message from '../Components/Message';\nimport { ChatBoxMessages } from '../Components/ChatBoxMessages';\nimport { useQuery } from '@apollo/client';\nimport { FRIENDS_QUERY } from '../graphql/queries';\n\nconst chatboxnamedecompose = (chatBoxName) => {\n    let tmp = chatBoxName.split('_')\n    return tmp\n}\n\nconst ChatRoom = (props) => {\n    const { chatwparticular ,setChatlistdata, setChatwparticular, sendMessage, username, body, setBody, displayStatus, \n         chatBoxName, setChatBoxName} = props;\n    \n    const { loading, error, data,refetch} = useQuery(FRIENDS_QUERY, {variables:{username}});\n\n    const onFinish = (values) => {\n        console.log('Success:', values);\n    };\n    const onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n    let two = chatboxnamedecompose(chatBoxName)\n    const anotherUser = two[0] === username ? two[1] :two[0]\n\n    return (\n        <div c>\n        <Title>\n            <h1>{anotherUser}</h1>\n            <Button type=\"primary\" danger onClick={()=>{   \n                setChatwparticular(false)\n                setChatBoxName('')\n            }}>\n            back\n            </Button>\n        </Title>\n        <ChatBoxMessages username = {username} chatBoxName = {chatBoxName} chatwparticular = {chatwparticular}/>\n        <Input.Search\n            enterButton=\"Send\"\n            placeholder=\"Type a message here...\"\n            value={body}\n            onChange={(e) => setBody(e.target.value)}\n            onSearch={async (msg) => {\n                if (!msg) {\n                    displayStatus({\n                        status: 'Failed',\n                        message: 'Please enter a message body.'\n                    });\n                    return;\n                }\n                let twonames = chatboxnamedecompose(chatBoxName)\n                const receiver = twonames[0] === username?twonames[1]:twonames[0]\n                await sendMessage({\n                    variables: {\n                        from: username,\n                        to: receiver,\n                        message: msg\n                    },\n                });\n        //         setBody('');\n\n        //         refetch()\n        //         if (data) {\n        //         let tmp = data.friends.map(i => {return {...i}})\n        //         tmp.forEach((i)=>{i.unreadDot = false});    \n        //         setChatlistdata(tmp)\n        //         //console.log('in chatroom useeffect',data.friends)\n        // }\n            }}\n        ></Input.Search>\n        </div>\n    )\n}\n\nexport default ChatRoom;\n"]},"metadata":{},"sourceType":"module"}